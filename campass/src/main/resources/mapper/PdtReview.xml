<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.campass.demo.dao.PdtReviewDao">
  <!-- 리뷰 목록페이지 물어보기 -->
  
  <!-- <resultMap type="String" id="ProductMap">
  	<result column="Product" property="Product"/>
  </resultMap>
  
  <resultMap type="com.campass.demo.dto.PdtReviewDto$ReadReviewList" id="AddContentMap">
  	<result column="pStar" property="pStar"/>
  	<result column="pReviewContent" property="pReviewContent"/>
  	<result column="bId" property="bId"/>
  	<result column="pReviewDate" property="pReviewDate"/>
  	<collection property="Product" resultMap="ProductMap"></collection>
  </resultMap>
   -->
  
  
  <select id="reviewList" parameterType="int" resultType="com.campass.demo.dto.PdtReviewDto$ReadReviewList">
  	select pStar, pReviewContent, bId, pReviewDate from pdtReview
  </select>
  
  <!-- 등록 -->
  <insert id="saveReview">
  	<selectKey keyProperty="pReviewNo" resultType="int" order="BEFORE">
  		select nvl(max(pReviewNo),0)+1 from pdtReview
  	</selectKey>
  	insert into pdtReview(pReviewNo, pOrderNo, pOdtNo, pStar, pReviewContent, bId, pCode)
  	values (#{pReviewNo},#{pOrderNo},#{pOdtNo},#{pStar},#{pReviewContent},#{bId},#{pCode})
  </insert>
  
  <!-- 글쓴이 확인 -->
  <select id="findById" resultType="String">
  	select bId from pdtReview where pReviewNo=#{pReviewNo}
  </select>
  
  <!-- 삭제 -->
  <delete id="deletePdtReview">
  	delete from pdtReview where pReviewNo=#{pReviewNo}
  </delete>
  

</mapper>
